# Packer Proxmox Configuration
# Generated: {{ ansible_date_time.iso8601 }}

# Load token from packer@pve-automation.token file:
# source tokens/packer@pve-automation.token
# export PKR_VAR_proxmox_token="$TOKEN_SECRET"

variable "proxmox_token" {
  type        = string
  description = "Proxmox API token secret"
  sensitive   = true
}

# Basic Proxmox connection settings
locals {
  proxmox_url      = "https://{{ hostvars[groups['pve01'][0]]['ansible_host'] }}:8006/api2/json"
  proxmox_username = "packer@pve!automation"
  proxmox_node     = "{{ groups['pve01'][0] | regex_replace('\\..*', '') }}"
}