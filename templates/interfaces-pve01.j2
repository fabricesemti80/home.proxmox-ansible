# {{ ansible_managed }}
# network interface settings; autogenerated
# Please do NOT modify this file directly, unless you know what
# you're doing.
#
# If you want to manage parts of the network configuration manually,
# please utilize the 'source' or 'source-directory' directives to do
# so.
# PVE will preserve these directives, but will NOT read its network
# configuration from sourced files, so do not attempt to move any of
# the PVE managed interfaces into external files!

auto lo
iface lo inet loopback

iface enp2s0 inet manual

{% if ansible_interfaces is defined %}
{% for interface in ansible_interfaces %}
{% if interface.startswith('enx') %}
iface {{ interface }} inet manual
{% endif %}
{% endfor %}
{% endif %}

auto eth0
iface eth0 inet static
    address 10.0.70.{{ ansible_host.split('.')[-1] }}/24

auto vmbr0
iface vmbr0 inet static
    address 10.0.40.{{ ansible_host.split('.')[-1] }}/24
    gateway 10.0.40.1
    bridge-ports enp2s0
    bridge-stp off
    bridge-fd 0

{% if ansible_interfaces is defined and ('wlp3s0' in ansible_interfaces) %}
iface wlp3s0 inet manual
{% endif %}

source /etc/network/interfaces.d/*
